{"version":3,"sources":["services/shop-service.js","components/course-list-item/index.js","components/course-list-item/course-list-item.js","components/course-list/index.js","components/course-list/course-list.js","components/search-panel/index.js","components/search-panel/search-panel.js","components/toggle-price/toggle-price.js","components/app/index.js","components/app/app.js","index.js"],"names":["ShopService","_apiBase","_headers","Headers","Content-Type","_init","method","body","JSON","stringify","data","headers","this","getResourse","_callee","res","regenerator_default","a","wrap","_context","prev","next","fetch","_this","sent","json","abrupt","stop","CourseListItem","_ref","togglePosition","genre","grade","subject","price","priceBonus","courseId","priceView","concat","imageUrl","trGrade","split","length","splice","join","react_default","createElement","className","src","alt","href","CourseList","_this$props","props","elements","map","item","key","components_course_list_item","Component","SearchPanel","state","searchText","changeFilter","event","newState","Object","objectSpread","target","value","name","setState","onFormSubmit","preventDefault","isSearched","react","onSubmit","onChange","type","placeholder","TogglePrice","position","onTogglePrice","rubClassName","bonusClassName","onClick","App","shopService","filter","filterData","_this2","then","items","filteredData","_this$state","toLowerCase","indexOf","role","toggle_price_toggle_price","components_search_panel","components_course_list","render","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.07be14a5.chunk.js","sourcesContent":["export default class ShopService {\r\n  \r\n  _apiBase = 'http://krapipl.imumk.ru:8082/api/mobilev1/update/';\r\n\r\n  _headers = new Headers({\r\n    \"Content-Type\": \"application/json\"\r\n  });\r\n\r\n  _init = {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      data: ''\r\n    }),\r\n    headers: this._headers\r\n  };\r\n\r\n  getResourse = async () => {\r\n    const res = await fetch(this._apiBase, this._init);\r\n    return await res.json();\r\n  }\r\n\r\n}\r\n\r\n","import CourseListItem from \"./course-list-item\";\r\n\r\nexport default CourseListItem;","import React from 'react';\r\nimport './course-list-item.css';\r\n\r\nconst CourseListItem = ({ data, togglePosition }) => {\r\n\r\n  const { genre, grade, subject, price, priceBonus, courseId } = data;\r\n\r\n  const priceView = togglePosition === 'rub' ? `${price} руб.` : `${priceBonus}`;\r\n\r\n  const imageUrl = `https://www.imumk.ru/svc/coursecover/${courseId}`;\r\n\r\n  let trGrade = grade.split(';');\r\n\r\n  if (trGrade.length > 2) {\r\n    trGrade.splice(1, trGrade.length - 2);\r\n  }\r\n\r\n  trGrade = trGrade.join('-') + (trGrade.length > 1 ? ' классы' : ' класс');\r\n\r\n  return (\r\n    <div className=\"cousre-list-item\">\r\n      <div className=\"item-cover\">\r\n        <img src={imageUrl} alt=\"Демо-версия\"/>\r\n      </div>\r\n      <div className=\"item-info\">\r\n        <div className=\"item-title\">{subject}</div>\r\n        <div className=\"item-grade\">{trGrade}</div>\r\n        <div className=\"item-genre\">{genre}</div>\r\n        <div className=\"item-link\">\r\n          <a href=\"/\">Подробнее</a>\r\n        </div>\r\n        <button className=\"item-btn\">{priceView}</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CourseListItem;","import CourseList from \"./course-list\";\r\n\r\nexport default CourseList;","import React, { Component } from 'react';\r\nimport './course-list.css';\r\n\r\nimport CourseListItem from '../course-list-item';\r\n\r\nclass CourseList extends Component {\r\n\r\n  render() {\r\n\r\n    const { data, togglePosition } = this.props;\r\n\r\n    if (!data) {\r\n      return <h3>loading...</h3>\r\n    }\r\n\r\n    const elements = data.map((item) => {\r\n\r\n      const { courseId } = item;\r\n\r\n      return (\r\n        <li key={courseId}>\r\n          <CourseListItem data={item} togglePosition={togglePosition}/>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <ul className=\"course-list\">\r\n        {elements}\r\n      </ul>\r\n    );\r\n  };\r\n}\r\n\r\nexport default CourseList;","import SearchPanel from \"./search-panel\";\r\n\r\nexport default SearchPanel;","import React, { Component, Fragment } from 'react';\r\nimport './search-panel.css';\r\n\r\nclass SearchPanel extends Component {\r\n\r\n  state = {\r\n    subject: '',\r\n    genre: '',\r\n    grade: '',\r\n    searchText: ''\r\n  }\r\n\r\n  changeFilter = (event) => {\r\n    const newState = {...this.state};\r\n\r\n    if (event.target.value === 'all') {\r\n      newState[event.target.name] = '';\r\n    } else {\r\n      newState[event.target.name] = event.target.value;\r\n    }\r\n\r\n    this.setState(newState);\r\n    this.props.onFormSubmit(newState);\r\n  }\r\n\r\n  onFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onFormSubmit(this.state);\r\n  }\r\n\r\n  render() {\r\n\r\n    const { isSearched } = this.props;\r\n\r\n    return (\r\n      <Fragment>\r\n        <form className=\"search-panel\" onSubmit={this.onFormSubmit}>\r\n          <div className=\"\">\r\n            <select name=\"subject\" onChange={this.changeFilter}>\r\n              <option value=\"all\">Все предметы</option>\r\n              <option>Алгебра</option>\r\n              <option>Английский язык</option>\r\n              <option>Биология</option>\r\n              <option>География</option>\r\n              <option>Геометрия</option>\r\n              <option>Демо-версия</option>\r\n              <option>Информатика</option>\r\n              <option>История</option>\r\n              <option>Литература</option>\r\n              <option>Математика</option>\r\n              <option>Обществознание</option>\r\n              <option>Окружающий мир</option>\r\n              <option>Робототехника</option>\r\n              <option>Русский язык</option>\r\n              <option>Физика</option>\r\n              <option>Химия</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"\">\r\n            <select \r\n              name=\"genre\" \r\n              onChange={this.changeFilter}\r\n            >\r\n              <option value=\"all\">Все жанры</option>\r\n              <option>Демо</option>\r\n              <option>Задачник</option>\r\n              <option>Подготовка к ВПР</option>\r\n              <option>Подготовка к ЕГЭ</option>\r\n              <option>Рабочая тетрадь</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"\">\r\n            <select \r\n              name=\"grade\" \r\n              onChange={this.changeFilter}\r\n            >\r\n              <option value=\"all\">Все классы</option>\r\n              <option>1</option>\r\n              <option>2</option>\r\n              <option>3</option>\r\n              <option>4</option>\r\n              <option>5</option>\r\n              <option>6</option>\r\n              <option>7</option>\r\n              <option>8</option>\r\n              <option>9</option>\r\n              <option>10</option>\r\n              <option>11</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"search\">\r\n            <input \r\n              type=\"text\" \r\n              name=\"searchText\" \r\n              placeholder=\"Поиск\"\r\n              value={this.state.searchText}\r\n              onChange={this.changeFilter}\r\n            />\r\n            <button type=\"submit\"></button>\r\n          </div>\r\n        </form>\r\n        <div className=\"search-results\">\r\n          {isSearched ? 'Результаты поиска:' : null}\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n};\r\n\r\nexport default SearchPanel;","import React from 'react';\r\nimport './toggle-price.css';\r\n\r\nconst TogglePrice = ({ position, onTogglePrice }) => {\r\n\r\n  const rubClassName = position === 'rub' ? 'active' : '';\r\n  const bonusClassName = position === 'bonus' ? 'active' : '';\r\n\r\n  return (\r\n    <div className=\"toggle-price\">\r\n      <button \r\n        type=\"button\" \r\n        className={rubClassName}\r\n        onClick={() => onTogglePrice('rub')}\r\n      >\r\n        Рубли\r\n      </button>\r\n\r\n      <button \r\n        type=\"button\" \r\n        className={bonusClassName}\r\n        onClick={() => onTogglePrice('bonus')}\r\n      >\r\n        Бонусы\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TogglePrice;","import App from \"./app\";\r\n\r\nexport default App;","import React, { Component } from 'react';\r\nimport './app.css';\r\n\r\nimport ShopService from '../../services/shop-service';\r\nimport CourseList from '../course-list';\r\nimport SearchPanel from '../search-panel';\r\nimport TogglePrice from '../toggle-price/toggle-price';\r\n\r\nclass App extends Component {\r\n\r\n  shopService = new ShopService();\r\n\r\n  state = {\r\n    data: null,\r\n    filter: null,\r\n    isSearched: false,\r\n    togglePosition: 'rub'\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.shopService.getResourse()\r\n      .then((data) => {\r\n        this.setState({\r\n          data: data.items\r\n        })\r\n      })\r\n  };\r\n\r\n\r\n  filterData = (filter) => {\r\n    let isSearched = false;\r\n    for (let key in filter) {\r\n      if (filter[key]) {\r\n        isSearched = true;\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      filter,\r\n      isSearched\r\n    });\r\n  };\r\n\r\n  onTogglePrice = (togglePosition) => {\r\n    this.setState({\r\n      togglePosition\r\n    });\r\n  };\r\n\r\n  render() {\r\n\r\n    const { data, filter, isSearched, togglePosition } = this.state;\r\n    let filteredData;\r\n\r\n    if (data && filter) {\r\n      const { subject, genre, grade, searchText } = filter;\r\n\r\n      filteredData = data.filter((item) => {\r\n        if (subject)  {\r\n          return subject === item.subject;\r\n        } \r\n        return true;\r\n      })\r\n      .filter((item) => {\r\n        if (genre) {\r\n          return genre === item.genre;\r\n        }\r\n        return true;\r\n      })\r\n      .filter((item) => {\r\n        if (grade) {\r\n          return grade === item.grade;\r\n        }\r\n        return true;\r\n      })\r\n      .filter((item) => {\r\n        if (searchText) {\r\n          const itemSubject = item.subject.toLowerCase();\r\n          return ~itemSubject.indexOf(searchText.toLowerCase());\r\n        }\r\n        return true;\r\n      })\r\n    } else {\r\n      filteredData = data;\r\n    }\r\n\r\n    return (\r\n      <main role=\"main\">\r\n        <div className=\"container\">\r\n          <header>\r\n            <h3 className=\"header-title\">Витрина</h3>\r\n          </header>\r\n          <TogglePrice position={togglePosition} onTogglePrice={this.onTogglePrice}/>\r\n          <SearchPanel onFormSubmit={this.filterData} isSearched={isSearched}/>\r\n          <CourseList data={filteredData} togglePosition={togglePosition}/>\r\n        </div>\r\n      </main>\r\n    );\r\n  };\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport { render } from 'react-dom';\r\n\r\nimport './reset.css';\r\n\r\nimport App from './components/app';\r\n\r\nrender(<App />, document.getElementById('root'));"],"sourceRoot":""}